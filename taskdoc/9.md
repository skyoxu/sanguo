# Task 9: 设计UI界面

- 上下文：2025-12-19 00:37:37
- id: 9
- status: in-progress
- dependencies: 1
- adrRefs: ADR-0005, ADR-0018, ADR-0022
- archRefs: CH01, CH04, CH06, CH07, CH10
- overlay: docs/architecture/overlays/PRD-SANGUO-T2/08/08-功能纵切-T2-三国大富翁闭环.md

## 本任务目标（来自 tasks.json）
在 Godot 中设计 UI，包括玩家信息面板、骰子按钮、事件提示框、资金与日期显示等，将核心显示元素组织为可复用场景（HUD、对话框、日志面板），避免在脚本中堆叠控件创建逻辑。控件选择与布局可参考 Godot 官方演示项目 gui/control_gallery、gui/accessibility 中的最佳实践，在此基础上使用项目自定义主题统一视觉风格。

## 可复用资源盘点
- Scenes (Godot):
  - `Game.Godot/Scenes/Main.tscn`
  - `Game.Godot/Scenes/Screens/SettingsScreen.tscn`
  - `Game.Godot/Scenes/Screens/StartScreen.tscn`
  - `Game.Godot/Scenes/UI/HUD.tscn`
  - `Game.Godot/Scenes/UI/MainMenu.tscn`
  - `Game.Godot/Scenes/UI/SettingsPanel.tscn`
- UI scripts:
  - `Game.Godot/Scripts/UI/HUD.cs`
  - `Game.Godot/Scripts/UI/MainMenu.cs`
  - `Game.Godot/Scripts/UI/SettingsLoader.cs`
  - `Game.Godot/Scripts/UI/SettingsPanel.cs`
  - `Game.Godot/Scripts/UI/ThemeApplier.cs`
- Navigation scripts:
  - `Game.Godot/Scripts/Navigation/ScreenNavigator.cs`

## 事件契约盘点（参考 ADR-0004）
- Contracts folder: `Game.Core/Contracts/Sanguo/`
  - `Game.Core/Contracts/Sanguo/BoardEvents.cs`
  - `Game.Core/Contracts/Sanguo/EconomyEvents.cs`
  - `Game.Core/Contracts/Sanguo/GameEvents.cs`
  - `Game.Core/Contracts/Sanguo/PlayerAndAiEvents.cs`

## 事件桥接与订阅入口
- Godot -> Core event bridge: `Game.Godot/Adapters/EventBusAdapter.cs`
  - Signal: `DomainEventEmitted(type, source, dataJson, id, specVersion, dataContentType, timestampIso)`
- Autoload wiring: `Game.Godot/Autoloads/CompositionRoot.cs` (InitializePorts)

## 检索入口关键词（用于 Serena）
- UI/Scene: `HUD`, `MainMenu`, `SettingsPanel`, `StartScreen`, `SettingsScreen`, `ScreenNavigator`, `ThemeApplier`
- Events/Contracts: `DomainEvent`, `IEventBus`, `EventBusAdapter`, `SanguoGameTurnStarted`, `SanguoMonthSettled`, `SanguoSeasonEventApplied`

